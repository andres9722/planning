(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAMAAADX9CSSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA6lBMVEUAAAD////06ur07O706+306+306+316+306+7u7u7////16+706+306u306+716uz06+307Ozy7Ozw8PDy6+v16+706u316+306u306+3////z6+306+3z6+707O3////16+3z6uzz7O706+3q6urz7Oz27e3z6+v06+3z7Oz06+306u3z6uz06+306uz06uz06O716+v06+317O337u706+z06u716+vz6+v06+3z7Oz07Oz06+706+306+3z7O7z6u316u706u306+316uz06+z07O706+306+306+306+3t7e306+0AAABy79u1AAAATHRSTlMABRh3y+/yxHUPAWj07FuVyF8oESZm031v/AOB/liRBsNthegMKR1B2Gxxum7miIctM+SrHviGGkDZa16/53CEVZNh1Xrqdsru8HMOi5ydWwAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiDBUUGwn+qiIXAAAAxElEQVQoz6WRVw7CMBBETYeEFmoAhxp67713mPufhxAIMRFISMyPV09j7+yakL9k+sDMFqsNdofT9UY53o2HPF6W+wC/EAiGwhEgqmMRMZFTq3iCUkmthGSKpJF5ebLIyXcrRZ4UikyoEsoqzhqSVVAlNYp6Q1ezpfA2OkRLp6mr8B76Rv9A8397/5lnOGLyjDG5n9OkicyY/E3MZWbexXPeJaUr/fJa2c8mHwzwW9Ad2yysJd5Lhv0fjiec05frj//1k256DCTmPwizJgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOC0xMi0yMVQxOToyNzowOSswMTowMCWzLr4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTgtMTItMjFUMTk6Mjc6MDkrMDE6MDBU7pYCAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},21:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAQAAABKIxwrAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiDBUVKi0FNqtDAAACRklEQVQ4y22TX2jNcRjGP99zfsuaXMyf2n92Q5SizYX/thZhS8NwyWJSCsWF0MaFXG3ZHys3bgjjAsmFXLgZNzOTFCIJqyXLjTiccz4uzs/ZWXnvvu/z9H6fnvd9AtPKNeyinoUkyPCWUa6HJ4V4KKA20c1SvvGIj0xSzGLWU8ZQ2D3FiWJqRB8HGWULD0MmPyDBJn4aqJ0uocjbpj1u/JdHvFqAFpuvXKPftK1gldsBbHcQwBbvOjemj9hmG2CDWY8DeMV3JgrmNnvLpMXqK7M2QQCfk2FFECxhVpiwmq1UMM798Dknhp8cZi9RWI6r1M1gOYDBc/6OhabsMoAznHSf29QG7POrSZeYch14Vh2wEiyzx6xdUy45YQ8Oex0s86glVplyoEB7jykr868hR3DSC/nGQbNWA1hhnXVuVTvy6HknIiK+5ceV8yd8AqCDzrhXCe6gKNzgO6UJ0swBO70GjBNZBcBl6qmnFfgMtNEKzOVHxGvmA1+IgAekOcUhCOOMg/tJ8QDCHpNALe/xol9N5vV1qoPWgDUOqmcKDmXSflyd8x0sstRgl6nY91+eNljuJeeBLWoj4AtHDOAdhwGstMMuD1gB4AY/WmPCMV8aABtzN2OdLbnNxt/PjDddAp40a8M/XQO5iwQw6QfbARz2Xtzbacbeqe1F3jLtCRPgLE+5FsCNLgETnjTjTaPpAek166hbplwCI5sdM2v/P3JhVhvoZlk+q7NZQBOzGeNYePyfaAO4kj3UsYgkGd7wjBvhaSH+FxoWgD/4WEuxAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTEyLTIxVDIwOjQyOjQ1KzAxOjAwkzFkBAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0xMi0yMVQyMDo0Mjo0NSswMTowMOJs3LgAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},26:function(e,t,n){e.exports=n(71)},31:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),o=n.n(r),s=(n(31),n(73)),i=n(75),l=n(72),u=n(74),A=function(e){var t=e.children;return c.a.createElement("div",{className:"l-container"},t)},m=function(){return c.a.createElement(A,null,c.a.createElement("h1",null,"Error 404 - page not found"))},d=n(11),h=n(22),g=n(17),f=n(18),E=n(23),v=n(19),p=n(24),b=n(5),k=n.n(b),N=(n(12),n(13),{apiKey:"AIzaSyBED-jAnaal1bUxXeDbF19ITJwr4ycgsME",authDomain:"planning-granada.firebaseapp.com",databaseURL:"https://planning-granada.firebaseio.com",projectId:"planning-granada",storageBucket:"planning-granada.appspot.com",messagingSenderId:"718805362142"}),O=function(){var e=new k.a.auth.GoogleAuthProvider;return k.a.auth().signInWithRedirect(e)},w=function(){return k.a.auth().signOut()},C=Object(a.createContext)({}),y=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).state={auth:!1,user:null,error:null,loading:!1},n.onLogin=function(){n.setState({loading:!0}),O().then(function(){n.setState({loading:!1,auth:!0})}).catch(function(e){n.setState({loading:!1,error:"Error: ".concat(e.message)})})},n.onSignOut=function(){w().then(function(){var e=k.a.firestore();e.settings({timestampsInSnapshots:!0}),e.collection("users").doc(n.state.user.email).update({status:!1,value:0,vote:!1}),n.setState({auth:!1,user:null})}).catch(function(e){n.setState({error:"Error: ".concat(e.message)})})},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=k.a.firestore();t.settings({timestampsInSnapshots:!0}),k.a.auth().getRedirectResult().then(function(e){if(e.user&&e.additionalUserInfo.isNewUser){var n={email:e.user.email,name:e.user.displayName,photo:e.user.photoURL,status:!0,vote:!1,value:0};t.collection("users").doc(n.email).set(n).then(function(e){return console.log(e)}).catch(function(e){return console.error(e)})}}).catch(function(e){return console.error(e)}),this.setState({loading:!0}),this.unsubscribe=k.a.auth().onAuthStateChanged(function(t){t?e.setState({auth:!0,loading:!1,user:t},function(){var t=k.a.firestore();t.settings({timestampsInSnapshots:!0}),t.collection("users").doc(e.state.user.email).update({status:!0}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}):e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){return c.a.createElement(C.Provider,{value:Object(d.a)({},this.state,{onLogin:this.onLogin,onSignOut:this.onSignOut})},this.props.children)}}]),t}(a.Component),j=C.Consumer,z=(n(44),function(e){var t=e.users;return c.a.createElement("div",{className:"active"},c.a.createElement("h1",{className:"active__title"},"Active"),c.a.createElement("div",{className:"active__photos"},t.map(function(e){return c.a.createElement("div",{key:e.email,className:"active__indicator"},c.a.createElement("img",{className:"active__img",src:e.photo,alt:"avatar"}))})))}),M=(n(47),function(e){var t=e.children,n=e.theme,a=e.onClick,r=e.disabled,o=e.type,s=e.id;return c.a.createElement("button",{disabled:r,onClick:a,className:"button ".concat(n||""),type:o||"button",id:s},t)}),S=(n(50),n(53),function(e){var t=e.onClick,n=e.children;return c.a.createElement("div",{className:"card",onClick:function(){return t(n)}},c.a.createElement("h1",{className:"card__number"},n))}),B=(n(55),n(58),function(e){var t=e.votes,n=t.map(function(e){return e.value}).reduce(function(e,t){return Number(e)+Number(t)},0),a=n/t.length||0;return c.a.createElement("div",{className:"results"},c.a.createElement("h5",{className:"results__title"},"Results"),c.a.createElement("ul",{className:"results__list"},t.map(function(e){return c.a.createElement("li",{key:e.email,className:"results__list-item"},c.a.createElement("span",{className:"results__list-item-name"},e.email," : ",c.a.createElement("b",null,e.value)))})),c.a.createElement("h1",{className:"results__total"},"Total: ",n," "),c.a.createElement("h1",{className:"results__average"},"Average: ",a.toFixed(2)," "))}),U=function(e){var t=e.users,n=e.getUsers,r=Object(a.useContext)(C).user,o=k.a.firestore();o.settings({timestampsInSnapshots:!0});var s=function(e){o.collection("users").doc(r.email).update({vote:!0,value:e}).then(function(e){return n()}).catch(function(e){return console.log(e)})};return c.a.createElement(a.Fragment,null,c.a.createElement("div",{className:"cards"},c.a.createElement(S,{onClick:s},"0"),c.a.createElement(S,{onClick:s},"1"),c.a.createElement(S,{onClick:s},"2"),c.a.createElement(S,{onClick:s},"3"),c.a.createElement(S,{onClick:s},"4"),c.a.createElement(S,{onClick:s},"5")),c.a.createElement(B,{votes:t}))},F=n(20),R=n.n(F),x=n(21),D=n.n(x),W=function(){var e=Object(a.useContext)(C).onSignOut,t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],o=n[1],s=k.a.firestore();s.settings({timestampsInSnapshots:!0});var i=function(){return s.collection("users").where("status","==",!0).onSnapshot(function(e){var t=[];e.forEach(function(e){t.push(Object(d.a)({},e.data(),{id:e.id})),o(t)})})};Object(a.useEffect)(function(){i()},[]);return c.a.createElement(a.Fragment,null,c.a.createElement(A,null,c.a.createElement("div",{className:"dashboard"},c.a.createElement("h1",{className:"dashboard__title"},"Planning granada"),r&&r.length&&c.a.createElement(U,{users:r,getUsers:i}),c.a.createElement(M,{theme:"button--signout",onClick:function(){return e()}},c.a.createElement("img",{src:R.a,alt:"logout"})),c.a.createElement(M,{theme:"button--reset button--secondary",onClick:function(){r.forEach(function(e){s.collection("users").doc(e.email).update({vote:!1,value:0}).then(function(e){return i()}).catch(function(e){return console.log(e)})})}},c.a.createElement("img",{src:D.a,alt:"reset"})),c.a.createElement(z,{users:r}))))},G=(n(61),function(){var e=Object(a.useContext)(C).onLogin;return c.a.createElement("div",{className:"login"},c.a.createElement("h1",null,"granada"),c.a.createElement(M,{theme:"login__button",onClick:function(){return e()}},"Login"))}),I=function(e){var t=e.component,n=e.authed,a=e.rest;return c.a.createElement(i.a,Object.assign({},a,{render:function(e){return!0===n?c.a.createElement(t,e):c.a.createElement(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},V=function(e){var t=e.component,n=e.authed,a=e.rest;return c.a.createElement(i.a,Object.assign({},a,{render:function(e){return!1===n?c.a.createElement(t,e):c.a.createElement(l.a,{to:"/dashboard"})}}))},J=function(e){var t=e.auth;return c.a.createElement(u.a,null,c.a.createElement(V,{path:"/",exact:!0,authed:t,component:G}),c.a.createElement(I,{path:"/dashboard",exact:!0,authed:t,component:W}),c.a.createElement(i.a,{component:m}))},Q=(n(67),n(69),function(){return c.a.createElement("div",{className:"sk-cube-grid"},c.a.createElement("div",{className:"sk-cube sk-cube1"}),c.a.createElement("div",{className:"sk-cube sk-cube2"}),c.a.createElement("div",{className:"sk-cube sk-cube3"}),c.a.createElement("div",{className:"sk-cube sk-cube4"}),c.a.createElement("div",{className:"sk-cube sk-cube5"}),c.a.createElement("div",{className:"sk-cube sk-cube6"}),c.a.createElement("div",{className:"sk-cube sk-cube7"}),c.a.createElement("div",{className:"sk-cube sk-cube8"}),c.a.createElement("div",{className:"sk-cube sk-cube9"}))}),T=function(){return c.a.createElement(y,null,c.a.createElement(j,null,function(e){var t=e.auth,n=e.loading;return c.a.createElement(a.Fragment,null,!0===n?c.a.createElement("div",{className:"loader--full"},c.a.createElement(Q,null)):c.a.createElement(s.a,null,c.a.createElement(J,{auth:t})))}))},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}k.a.initializeApp(N),o.a.render(c.a.createElement(T,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/planning",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/planning","/service-worker.js");L?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Z(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Z(t,e)})}}()}},[[26,2,1]]]);
//# sourceMappingURL=main.b8d604a1.chunk.js.map